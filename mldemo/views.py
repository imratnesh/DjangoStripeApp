from django.shortcuts import render
from rest_framework import views, status
from rest_framework.response import Response
from .result import QAModule, SentimentModule

# Create your views here.
class Predict(views.APIView):
	def post(self, request):
		question = request.data.pop('question')
		qa = QAModule()

		answer = qa.getAnswer(question)
		return Response(answer, status=status.HTTP_200_OK)
# ['Podcast "Macro Waves": 3 episodes to understand the challenges of globalization', 'What is fueling the boom in rental property investment?', 'Category', 'On 17 January The Wall Street Journal published the â€œEconomistsâ€™\nstatement on carbon dividendsâ€. It managed to grab the attention if\nonly because of the impressive list of co-signatories . They consider\nthat a carbon tax is the most cost-effective instrument to reduce\ncarbon emissions to a sufficient degree and pace, that it should\nreplace less efficient regulations and that it should be increased every\nyear until the emission reduction goals are met.', 'This gradualist approach should give households and companies time\nto adjust their behaviour and finance the necessary investments\n(heating, means of transportation, manufacturing processes). It\nimplies that the cumulative increase in the carbon tax would depend\non the price sensitivity of the demand for carbon intensive goods and\nservices. The higher this sensitivity, the lower the required increase in\nthe carbon tax.', 'Ideally such an approach should be adopted globally but experience\nhas shown the difficulty of coming to a broad-based agreement and\nstick to it. It implies that single-country measures would weaken the\ncompetitiveness of its companies and create an incentive for other\ncountries not to do anything.', 'To address this coordination problem, the signatories call for the\nestablishment of a border carbon adjustment system in which exports\nto countries which do not apply a carbon tax would receive a rebate\nwhereas imports from these countries would be taxed when entering\nthe country. There is a concern however that other countries would\nconsider a carbon tax on imports as a protectionist measure which\nhas little to do with climate change, triggering retaliation measures.', 'The signatories also argue that it should be revenue neutral in order\nto avoid debates over the size of government and for this reason â€œall\nthe revenue should be returned directly to U.S. citizens through equal\nlump-sum rebatesâ€, the so-called carbon dividend. Considering that,\nquite likely, the carbon footprint of wealthier households is bigger than\nthat of households at the lower end of the income distribution, an\nequal lump-sum rebate would imply that the latter would see an\nincrease of their disposable income considering that the lump-sum\nrebate would be higher than the carbon taxes. This could create an\nincentive or at least facilitate energy efficiency investments on their\nbehalf.', 'It can be argued however that the revenue neutrality is a matter of\njudgment. The government could consider it has an important role to\nplay in fostering energy efficiency so it could use (part of) the carbon\ntax revenues to finance its own green investments (e.g. increase the\nenergy efficiency of public buildings and schools). Alternatively they\ncould be used to address the income distribution aspects of green\ntaxation by e.g. subsidising energy efficiency investments of\nfinancially constrained households.', 'Clearly, these alternative approaches are less easy to explain than a\nlump-sum rebate for every household. The recommendations of the\nEconomistsâ€™ statement have the merit of replacing often complex\nexisting regulations. In addition they show a direction which would\nallow to make considerable progress in terms of carbon emission\nreduction, at the initiative of a single country, thereby avoiding losing\nconsiderable time in addressing the international coordination\nproblem, and with the added advantage of being able to take into\naccount the distributional aspects as well.', '', 'The Economic Research Department of BNP Paribas.', 'Share this page !', 'Tools', '', 'With a 25.2% growth worldwide between 2014 and 2016, Socially Responsible Investment (SRI) has...', 'Earlier this month, the Peopleâ€™sLab4Good was at Web2Day, the Nantes-based festival dedicated...']

class PredictSentiment(views.APIView):
	def post(self, request):
		sentence = request.data.pop('sentence')
		sm = SentimentModule()
		sentiment = sm.getSentiment()
		return Response(sentence, status=status.HTTP_200_OK)
